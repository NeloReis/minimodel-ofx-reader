<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Leitor de arquivos OFX de bancos brasileiros">
  <title>OFX Reader - Leitor de Extratos BancÃ¡rios</title>
  
  <!-- Phosphor Icons (CDN) -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  
  <!-- Chart.js for Analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- GSAP for Animations -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3"></script>
  
  <style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   OFX READER - COMPLETE STYLESHEET
   Dark Blue Professional Theme - DASHBOARD EDITION
   Full-Screen Web App with Internal Scrolling
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CSS VARIABLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

:root {
  /* â”€â”€ Deep Dark Backgrounds â”€â”€ */
  --bg-base: #030810;
  --bg-primary: #050d18;
  --bg-secondary: #081625;
  --bg-tertiary: #0a1c2e;
  --bg-elevated: #071420;
  --bg-hover: rgba(25, 118, 210, 0.12);
  
  /* â”€â”€ Enhanced Gradient Backgrounds â”€â”€ */
  --bg-gradient: linear-gradient(180deg, #030810 0%, #050d18 50%, #020508 100%);
  --bg-card-shine: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, transparent 50%);
  --bg-dashboard: linear-gradient(135deg, #050d18 0%, #081625 100%);

  /* â”€â”€ Borders â”€â”€ */
  --border-subtle: rgba(100, 181, 246, 0.06);
  --border-default: #1a3a5c;
  --border-strong: #234b70;
  --border-focus: #1976d2;
  
  /* â”€â”€ INTENSE NEON GLOWS â”€â”€ */
  --glow-accent: 0 0 30px rgba(25, 118, 210, 0.5), 0 0 60px rgba(25, 118, 210, 0.25), 0 0 100px rgba(25, 118, 210, 0.1);
  --glow-success: 0 0 25px rgba(76, 175, 80, 0.6), 0 0 50px rgba(76, 175, 80, 0.3), 0 0 80px rgba(76, 175, 80, 0.15);
  --glow-error: 0 0 25px rgba(244, 67, 54, 0.6), 0 0 50px rgba(244, 67, 54, 0.3), 0 0 80px rgba(244, 67, 54, 0.15);
  --glow-cyan: 0 0 20px rgba(0, 229, 255, 0.5), 0 0 40px rgba(0, 229, 255, 0.25);
  --glow-purple: 0 0 20px rgba(168, 85, 247, 0.5), 0 0 40px rgba(168, 85, 247, 0.25);
  --glow-gold: 0 0 20px rgba(251, 191, 36, 0.5), 0 0 40px rgba(251, 191, 36, 0.25);

  /* â”€â”€ Text Colors â”€â”€ */
  --text-primary: #e3f2fd;
  --text-secondary: #90caf9;
  --text-tertiary: #64b5f6;
  --text-muted: #3d5a73;
  --text-inverse: #030810;

  /* â”€â”€ Accent & Brand Colors â”€â”€ */
  --accent: #1976d2;
  --accent-rgb: 25, 118, 210;
  --accent-light: #42a5f5;
  --accent-lighter: #64b5f6;
  --accent-dark: #1565c0;
  --accent-darkest: #0d47a1;
  
  /* â”€â”€ NEON Accent Colors â”€â”€ */
  --neon-cyan: #00e5ff;
  --neon-purple: #a855f7;
  --neon-gold: #fbbf24;
  
  /* â”€â”€ Enhanced Gradients â”€â”€ */
  --gradient-accent: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%);
  --gradient-neon: linear-gradient(135deg, #00e5ff 0%, #1976d2 50%, #a855f7 100%);
  --gradient-header: linear-gradient(135deg, #050d18 0%, #081625 100%);

  /* â”€â”€ Text Colors â”€â”€ */
  --text-primary: #e3f2fd;
  --text-secondary: #90caf9;
  --text-tertiary: #64b5f6;
  --text-muted: #5a7a99;
  --text-inverse: #0a1929;

  /* â”€â”€ Accent & Brand Colors â”€â”€ */
  --accent: #1976d2;
  --accent-rgb: 25, 118, 210;
  --accent-light: #42a5f5;
  --accent-lighter: #64b5f6;
  --accent-dark: #1565c0;
  --accent-darkest: #0d47a1;
  
  /* â”€â”€ Enhanced Gradients â”€â”€ */
  --gradient-accent: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%);
  --gradient-header: linear-gradient(135deg, #0d1b2a 0%, #132f4c 100%);

  /* â”€â”€ Semantic Colors â”€â”€ */
  --color-success: #4caf50;
  --color-success-rgb: 76, 175, 80;
  --color-error: #f44336;
  --color-error-rgb: 244, 67, 54;
  --color-warning: #ff9800;
  --color-info: #42a5f5;

  /* â”€â”€ Typography â”€â”€ */
  --font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Tahoma, Geneva, Verdana, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;
  --font-size-xs: 0.6875rem;
  --font-size-sm: 0.75rem;
  --font-size-base: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;
  --font-size-2xl: 2rem;
  --font-size-3xl: 2.5rem;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;

  /* â”€â”€ Spacing (4px base unit) â”€â”€ */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;

  /* â”€â”€ Border Radius â”€â”€ */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* â”€â”€ Enhanced Shadows â”€â”€ */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 6px 10px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6), 0 10px 20px rgba(0, 0, 0, 0.4);
  --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(144, 202, 249, 0.05);
  --shadow-card-hover: 0 8px 30px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(144, 202, 249, 0.1), var(--glow-accent);

  /* â”€â”€ Transitions (Refined) â”€â”€ */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 400ms cubic-bezier(0.4, 0, 0.6, 1);
  --transition-bounce: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

  /* â”€â”€ Layout â”€â”€ */
  --header-height: 72px;
  --sidebar-width: 380px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS & MICRO-INTERACTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Page Load Animations â”€â”€ */
@keyframes slideUpFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInFromLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes headerSlideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â”€â”€ Staggered Animation Delays â”€â”€ */
@keyframes staggerFadeIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â”€â”€ Pulse Animation â”€â”€ */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

/* â”€â”€ Subtle Float Animation â”€â”€ */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

/* â”€â”€ Ripple Effect â”€â”€ */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.6;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

/* â”€â”€ Glow Pulse â”€â”€ */
@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 5px rgba(25, 118, 210, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(25, 118, 210, 0.5), 0 0 30px rgba(25, 118, 210, 0.3);
  }
}

/* â”€â”€ Status Indicator Pulse â”€â”€ */
@keyframes statusPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* â”€â”€ Card Hover Glow â”€â”€ */
@keyframes cardShine {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BASE STYLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  color: var(--text-primary);
  background: var(--bg-base);
  min-height: 100vh;
  overflow: hidden;
  position: relative;
}

/* Animated neon background */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(ellipse at 15% 15%, rgba(0, 229, 255, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 85% 85%, rgba(168, 85, 247, 0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(25, 118, 210, 0.04) 0%, transparent 60%);
  pointer-events: none;
  z-index: -1;
  animation: neonBgPulse 8s ease-in-out infinite;
}

@keyframes neonBgPulse {
  0%, 100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
}

/* Subtle grid overlay */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    linear-gradient(rgba(100, 181, 246, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 181, 246, 0.02) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  z-index: -1;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--text-primary);
}

/* â”€â”€ Accessibility â”€â”€ */

*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.4);
  border-radius: var(--radius-sm);
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD LAYOUT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.dashboard {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--space-6);
  height: var(--header-height);
  background: linear-gradient(180deg, rgba(5, 13, 24, 0.98) 0%, rgba(5, 13, 24, 0.95) 100%);
  border-bottom: 1px solid var(--border-subtle);
  backdrop-filter: blur(10px);
  flex-shrink: 0;
  position: relative;
  z-index: 100;
  animation: headerSlideDown 0.5s ease-out;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5), 0 0 40px rgba(25, 118, 210, 0.1);
}

/* Neon border bottom */
.app-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(0, 229, 255, 0.3) 20%, 
    rgba(25, 118, 210, 0.5) 50%, 
    rgba(168, 85, 247, 0.3) 80%, 
    transparent 100%);
  animation: neonBorderPulse 4s ease-in-out infinite;
}

@keyframes neonBorderPulse {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 1;
  }
}

.header-left {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.app-logo {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.app-logo-icon {
  width: 40px;
  height: 40px;
  background: var(--gradient-accent);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  box-shadow: 
    0 0 20px rgba(25, 118, 210, 0.4),
    0 0 40px rgba(25, 118, 210, 0.2),
    0 0 60px rgba(25, 118, 210, 0.1),
    inset 0 0 15px rgba(255, 255, 255, 0.1);
  transition: all var(--transition-bounce);
  animation: float 4s ease-in-out infinite, logoGlow 3s ease-in-out infinite;
}

@keyframes logoGlow {
  0%, 100% {
    box-shadow: 
      0 0 20px rgba(25, 118, 210, 0.4),
      0 0 40px rgba(25, 118, 210, 0.2),
      0 0 60px rgba(25, 118, 210, 0.1),
      inset 0 0 15px rgba(255, 255, 255, 0.1);
  }
  50% {
    box-shadow: 
      0 0 30px rgba(0, 229, 255, 0.5),
      0 0 50px rgba(25, 118, 210, 0.3),
      0 0 80px rgba(168, 85, 247, 0.2),
      inset 0 0 20px rgba(255, 255, 255, 0.15);
  }
}

.app-logo-icon:hover {
  transform: scale(1.15) rotate(5deg);
  box-shadow: 
    0 0 40px rgba(25, 118, 210, 0.6),
    0 0 60px rgba(25, 118, 210, 0.4),
    0 0 100px rgba(0, 229, 255, 0.3),
    inset 0 0 25px rgba(255, 255, 255, 0.2);
}

.app-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  background: linear-gradient(135deg, #e3f2fd 0%, #64b5f6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.02em;
}

.header-right {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.header-status {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  background: rgba(25, 118, 210, 0.15);
  border: 1px solid rgba(25, 118, 210, 0.3);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  transition: all var(--transition-base);
  box-shadow: 
    0 0 15px rgba(25, 118, 210, 0.15),
    inset 0 0 10px rgba(25, 118, 210, 0.05);
}

.header-status.success {
  background: rgba(25, 118, 210, 0.25);
  border-color: rgba(0, 229, 255, 0.6);
  box-shadow: 
    0 0 25px rgba(0, 229, 255, 0.35),
    0 0 50px rgba(25, 118, 210, 0.2),
    inset 0 0 15px rgba(25, 118, 210, 0.1);
}

.header-status.error {
  background: rgba(244, 67, 54, 0.2);
  border-color: rgba(244, 67, 54, 0.5);
  box-shadow: 
    0 0 25px rgba(244, 67, 54, 0.4),
    inset 0 0 15px rgba(244, 67, 54, 0.1);
}

.header-status.processing {
  animation: neonProcessing 1.5s ease-in-out infinite;
}

@keyframes neonProcessing {
  0%, 100% {
    box-shadow: 
      0 0 15px rgba(25, 118, 210, 0.2),
      inset 0 0 10px rgba(25, 118, 210, 0.05);
  }
  50% {
    box-shadow: 
      0 0 30px rgba(25, 118, 210, 0.5),
      0 0 45px rgba(0, 229, 255, 0.25),
      inset 0 0 15px rgba(25, 118, 210, 0.1);
  }
}

.header-status .status-icon {
  transition: transform var(--transition-bounce);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.main-content {
  display: flex;
  flex: 1;
  overflow: hidden;
  padding: var(--space-6);
  gap: var(--space-6);
  animation: slideUpFadeIn 0.6s ease-out 0.2s both;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TOP SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.top-section {
  display: flex;
  gap: var(--space-6);
  flex-shrink: 0;
  max-height: 45%;
  min-height: 280px;
}

.drop-column {
  flex: 0 0 var(--sidebar-width);
  display: flex;
  flex-direction: column;
}

.info-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DROP ZONE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.upload-section {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.upload-zone {
  flex: 1;
  border: 2px dashed var(--border-default);
  border-radius: var(--radius-2xl);
  padding: var(--space-8);
  text-align: center;
  cursor: pointer;
  transition: all var(--transition-base);
  background: rgba(8, 22, 37, 0.6);
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(5px);
}

/* Subtle animated glow border */
.upload-zone::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: var(--radius-2xl);
  background: linear-gradient(45deg, 
    rgba(0, 229, 255, 0), 
    rgba(25, 118, 210, 0.2), 
    rgba(168, 85, 247, 0),
    rgba(0, 229, 255, 0));
  background-size: 400% 400%;
  animation: borderGlow 6s ease infinite;
  z-index: -1;
  opacity: 0;
  transition: opacity var(--transition-base);
}

@keyframes borderGlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.upload-zone::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 0;
  height: 0;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(25, 118, 210, 0.2) 0%, transparent 70%);
  transition: all var(--transition-slow);
  opacity: 0;
}

.upload-zone:hover,
.upload-zone.dragover {
  border-color: var(--accent);
  background: rgba(25, 118, 210, 0.08);
  box-shadow: 
    0 0 30px rgba(25, 118, 210, 0.3),
    0 0 60px rgba(25, 118, 210, 0.15),
    inset 0 0 30px rgba(25, 118, 210, 0.05);
  transform: translateY(-3px);
}

.upload-zone:hover::before,
.upload-zone.dragover::before {
  opacity: 1;
}

.upload-zone:hover::after,
.upload-zone.dragover::after {
  width: 400px;
  height: 400px;
  opacity: 1;
}

.upload-zone.has-file {
  border: 2px solid transparent;
  background: rgba(25, 118, 210, 0.08);
  box-shadow: 
    0 0 30px rgba(0, 229, 255, 0.25),
    0 0 60px rgba(25, 118, 210, 0.15),
    inset 0 0 30px rgba(0, 229, 255, 0.1);
  position: relative;
  overflow: hidden;
}

/* Animated gradient border - smooth loop */
.upload-zone.has-file::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--radius-2xl);
  padding: 2px;
  background: linear-gradient(135deg, #00e5ff 0%, #1976d2 33%, #a855f7 66%, #00e5ff 100%);
  background-size: 400% 400%;
  animation: gradientBorderMove 4s linear infinite;
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
}

@keyframes gradientBorderMove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

.upload-zone.has-file::after {
  content: '';
  position: absolute;
  inset: 0;
  background: transparent;
  border-radius: var(--radius-2xl);
  z-index: 1;
}

.upload-zone.has-file:hover {
  box-shadow: 
    0 0 50px rgba(0, 229, 255, 0.45),
    0 0 80px rgba(25, 118, 210, 0.3),
    inset 0 0 40px rgba(0, 229, 255, 0.15);
  transform: translateY(-3px);
}

.upload-icon {
  font-size: 3rem;
  color: var(--accent);
  margin-bottom: var(--space-4);
  display: block;
  position: relative;
  z-index: 2;
  transition: transform var(--transition-bounce);
  animation: float 3s ease-in-out infinite;
  text-shadow: 
    0 0 10px rgba(25, 118, 210, 0.5),
    0 0 20px rgba(25, 118, 210, 0.3),
    0 0 40px rgba(25, 118, 210, 0.1);
}

.upload-zone:hover .upload-icon {
  animation: none;
  transform: scale(1.15);
  text-shadow: 
    0 0 15px rgba(0, 229, 255, 0.7),
    0 0 30px rgba(25, 118, 210, 0.5),
    0 0 60px rgba(25, 118, 210, 0.3);
}

.upload-zone.dragover .upload-icon {
  animation: pulse 0.6s ease-in-out infinite;
  transform: scale(1.2);
  text-shadow: 
    0 0 20px rgba(0, 229, 255, 0.8),
    0 0 40px rgba(25, 118, 210, 0.6),
    0 0 80px rgba(25, 118, 210, 0.4);
}

.upload-zone.has-file .upload-icon {
  animation: none;
  text-shadow: 
    0 0 15px rgba(0, 229, 255, 0.7),
    0 0 30px rgba(25, 118, 210, 0.5),
    0 0 60px rgba(25, 118, 210, 0.3);
}

.upload-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-2);
  position: relative;
  z-index: 2;
}

.upload-subtitle {
  color: var(--text-secondary);
  font-size: var(--font-size-base);
  margin-bottom: var(--space-3);
  position: relative;
  z-index: 2;
}

.upload-hint {
  color: var(--text-muted);
  font-size: var(--font-size-sm);
  position: relative;
  z-index: 2;
}

.file-input {
  display: none;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOADING STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.loading-container {
  display: none;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  padding: var(--space-8);
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-card);
}

.loading-container.visible {
  display: flex;
  animation: fadeIn 0.3s ease-out, scaleIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.spinner {
  width: 36px;
  height: 36px;
  border: 3px solid rgba(25, 118, 210, 0.2);
  border-top-color: var(--accent-light);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  box-shadow: 
    0 0 15px rgba(25, 118, 210, 0.5),
    0 0 30px rgba(25, 118, 210, 0.25);
  position: relative;
}

.spinner::before {
  content: '';
  position: absolute;
  top: -6px;
  left: -6px;
  right: -6px;
  bottom: -6px;
  border-radius: 50%;
  border: 2px solid transparent;
  border-top-color: rgba(0, 229, 255, 0.4);
  animation: spin 1.2s linear infinite reverse;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: var(--text-secondary);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-medium);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ERROR MESSAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.error-message {
  display: none;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  background: linear-gradient(135deg, rgba(244, 67, 54, 0.12) 0%, rgba(244, 67, 54, 0.05) 100%);
  border: 1px solid rgba(244, 67, 54, 0.4);
  border-left: 4px solid var(--color-error);
  border-radius: var(--radius-lg);
  color: var(--text-primary);
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.3),
    0 0 25px rgba(244, 67, 54, 0.2);
}

.error-message.visible {
  display: flex;
  animation: shake 0.5s ease-out, fadeIn 0.3s ease-out, errorGlowPulse 2s ease-in-out infinite;
}

@keyframes errorGlowPulse {
  0%, 100% {
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.3),
      0 0 25px rgba(244, 67, 54, 0.2);
  }
  50% {
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.3),
      0 0 40px rgba(244, 67, 54, 0.35),
      0 0 60px rgba(244, 67, 54, 0.15);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-5px); }
  40%, 80% { transform: translateX(5px); }
}

.error-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.error-text {
  flex: 1;
  font-size: var(--font-size-base);
  line-height: var(--line-height-relaxed);
  color: var(--text-primary);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INFO CARDS SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.info-section {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
  flex-shrink: 0;
}

.section-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-3);
  flex-shrink: 0;
}

.info-card {
  background: linear-gradient(145deg, rgba(8, 22, 37, 0.8) 0%, rgba(5, 13, 24, 0.9) 100%);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
  opacity: 0;
  animation: staggerFadeIn 0.5s ease-out forwards;
  backdrop-filter: blur(5px);
}

.info-card:nth-child(1) { animation-delay: 0.1s; }
.info-card:nth-child(2) { animation-delay: 0.2s; }
.info-card:nth-child(3) { animation-delay: 0.3s; }
.info-card:nth-child(4) { animation-delay: 0.4s; }
.info-card:nth-child(5) { animation-delay: 0.5s; }
.info-card:nth-child(6) { animation-delay: 0.6s; }

.info-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--gradient-neon);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform var(--transition-base);
}

.info-card::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(0, 229, 255, 0.05) 50%,
    transparent 100%
  );
  transform: rotate(45deg) translateX(-100%);
  transition: transform 0.8s ease-out;
}

.info-card:hover {
  border-color: rgba(25, 118, 210, 0.4);
  box-shadow: 
    0 8px 30px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(25, 118, 210, 0.2),
    0 0 40px rgba(25, 118, 210, 0.1);
  transform: translateY(-5px);
}

.info-card:hover::before {
  transform: scaleX(1);
}

.info-card:hover::after {
  transform: rotate(45deg) translateX(100%);
}

.info-card.highlight {
  background: linear-gradient(145deg, rgba(8, 22, 37, 0.9) 0%, rgba(25, 118, 210, 0.1) 100%);
  border-color: rgba(25, 118, 210, 0.4);
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.3),
    0 0 15px rgba(25, 118, 210, 0.15);
}

.card-icon {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  margin-bottom: var(--space-2);
  background: linear-gradient(135deg, rgba(25, 118, 210, 0.2) 0%, rgba(0, 229, 255, 0.1) 100%);
  color: var(--accent-light);
  box-shadow: 
    0 0 15px rgba(25, 118, 210, 0.2),
    inset 0 0 10px rgba(25, 118, 210, 0.1);
  transition: all var(--transition-base);
}

.info-card:hover .card-icon {
  transform: scale(1.15) rotate(8deg);
  background: linear-gradient(135deg, rgba(25, 118, 210, 0.3) 0%, rgba(0, 229, 255, 0.2) 100%);
  box-shadow: 
    0 0 25px rgba(25, 118, 210, 0.4),
    0 0 40px rgba(0, 229, 255, 0.2),
    inset 0 0 15px rgba(25, 118, 210, 0.15);
}

.card-label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-muted);
  margin-bottom: var(--space-1);
}

.card-value {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  word-break: break-word;
  line-height: var(--line-height-tight);
  transition: text-shadow var(--transition-base);
}

.card-value.highlight {
  background: var(--gradient-accent);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.card-value.balance-positive {
  color: var(--color-success);
  text-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
}

.card-value.balance-negative {
  color: var(--color-error);
  text-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
}

.card-subvalue {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-top: var(--space-1);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BOTTOM SECTION - TRANSACTION LIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.bottom-section {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  background: rgba(5, 13, 24, 0.7);
  border-radius: var(--radius-2xl);
  border: 1px solid var(--border-subtle);
  overflow: hidden;
  opacity: 0;
  animation: slideUpFadeIn 0.6s ease-out 0.3s forwards;
  backdrop-filter: blur(5px);
  box-shadow: 
    0 4px 30px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(25, 118, 210, 0.05),
    inset 0 0 30px rgba(0, 0, 0, 0.3);
}

/* Neon top border */
.list-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-4) var(--space-5);
  background: linear-gradient(180deg, rgba(10, 28, 46, 0.9) 0%, rgba(8, 22, 37, 0.8) 100%);
  border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
  position: relative;
}

.list-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 10%;
  right: 10%;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(0, 229, 255, 0.3) 50%, 
    transparent 100%);
}

.list-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.list-count {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1) var(--space-3);
  background: rgba(25, 118, 210, 0.15);
  border: 1px solid rgba(25, 118, 210, 0.3);
  border-radius: var(--radius-full);
  color: var(--accent-light);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  transition: all var(--transition-base);
}

.list-count.animate {
  animation: scaleIn 0.3s ease-out;
}

.list-container {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.list-container::-webkit-scrollbar {
  width: 8px;
}

.list-container::-webkit-scrollbar-track {
  background: var(--bg-primary);
}

.list-container::-webkit-scrollbar-thumb {
  background: var(--border-default);
  border-radius: var(--radius-full);
}

.list-container::-webkit-scrollbar-thumb:hover {
  background: var(--border-strong);
}

.transaction-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.transaction-item {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-5);
  border-bottom: 1px solid var(--border-subtle);
  transition: all var(--transition-fast);
  opacity: 0;
  transform: translateX(-10px);
}

.transaction-item.animate-in {
  animation: slideInFromLeft 0.4s ease-out forwards;
}

.transaction-item:hover {
  background: var(--bg-hover);
  padding-left: calc(var(--space-5) + 5px);
}

.transaction-item:last-child {
  border-bottom: none;
}

.transaction-item:nth-child(even) {
  background: rgba(30, 58, 95, 0.1);
}

.transaction-item:nth-child(even):hover {
  background: var(--bg-hover);
}

.transaction-date {
  width: 90px;
  flex-shrink: 0;
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

.transaction-amount {
  width: 130px;
  flex-shrink: 0;
  text-align: right;
  font-family: var(--font-mono);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-sm);
  padding-right: var(--space-4);
  transition: all var(--transition-fast);
}

.transaction-amount.credit {
  color: var(--color-success);
}

.transaction-amount.debit {
  color: var(--color-error);
}

.transaction-item:hover .transaction-amount {
  transform: scale(1.05);
  font-weight: var(--font-weight-bold);
}

.transaction-description {
  flex: 1;
  min-width: 0;
  font-size: var(--font-size-sm);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

@media (max-width: 1024px) {
  .main-content {
    flex-direction: column;
    overflow-y: auto;
  }
  
  .top-section {
    flex-direction: column;
    max-height: none;
    min-height: auto;
  }
  
  .drop-column {
    flex: none;
  }
  
  .info-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .bottom-section {
    min-height: 400px;
  }
  
  .info-card {
    animation-duration: 0.4s;
  }
  
  .bottom-section {
    animation-duration: 0.5s;
    animation-delay: 0.2s;
  }
}

@media (max-width: 768px) {
  .app-header {
    padding: 0 var(--space-4);
  }
  
  .main-content {
    padding: var(--space-4);
    gap: var(--space-4);
  }
  
  .info-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .transaction-date {
    width: 70px;
    font-size: var(--font-size-xs);
  }
  
  .transaction-amount {
    width: 100px;
    font-size: var(--font-size-xs);
  }
}

@media (max-width: 480px) {
  .info-grid {
    grid-template-columns: 1fr;
  }
  
  .transaction-item {
    padding: var(--space-2) var(--space-3);
  }
  
  .transaction-date {
    width: 60px;
  }
  
  .transaction-amount {
    width: 80px;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PRINT STYLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

@media print {
  * {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  
  body {
    background: white;
    color: black;
  }
  
  .dashboard {
    display: block;
    height: auto;
    overflow: visible;
  }
  
  .app-header {
    border-bottom: 2px solid #333;
  }
  
  .app-title {
    color: #000;
    background: none;
    -webkit-text-fill-color: initial;
  }
  
  .drop-column,
  .loading-container,
  .error-message {
    display: none !important;
  }
  
  .info-card {
    background: white;
    border: 1px solid #ddd;
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  .bottom-section {
    background: white;
    border: 1px solid #ddd;
  }
  
  .transaction-item {
    border-bottom: 1px solid #ddd;
  }
  
  .transaction-amount.credit {
    color: #2e7d32;
  }
  
  .transaction-amount.debit {
    color: #c62828;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ UTILITY CLASSES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.hidden {
  display: none !important;
}

.visible {
  display: block !important;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.text-muted {
  color: var(--text-muted);
}

.font-mono {
  font-family: var(--font-mono);
}

.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANALYTICS DASHBOARD - Chart.js Integration
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Chart Colors */
:root {
  --chart-credit: #4caf50;
  --chart-debit: #f44336;
  --chart-primary: #1976d2;
  --chart-accent: #00e5ff;
  --chart-purple: #a855f7;
  --chart-gold: #fbbf24;
  --chart-teal: #14b8a6;
  --chart-orange: #f97316;
}

/* Analytics Section */
.analytics-section {
  display: none;
  margin-bottom: var(--space-6);
  animation: fadeSlideIn 0.5s ease-out;
}

.analytics-section.visible {
  display: block;
}

.analytics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

@media (max-width: 900px) {
  .analytics-grid {
    grid-template-columns: 1fr;
  }
}

/* Stats Cards */
.stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}

@media (max-width: 900px) {
  .stats-row {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 500px) {
  .stats-row {
    grid-template-columns: 1fr;
  }
}

.stat-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  border: 1px solid var(--border-subtle);
  text-align: center;
  transition: all var(--transition-base);
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-card-hover);
}

.stat-card .stat-icon {
  font-size: 1.5rem;
  margin-bottom: var(--space-2);
  display: block;
}

.stat-card .stat-label {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--space-1);
}

.stat-card .stat-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
}

.stat-card .stat-value.credit {
  color: var(--chart-credit);
}

.stat-card .stat-value.debit {
  color: var(--chart-debit);
}

.stat-card .stat-value.neutral {
  color: var(--text-primary);
}

/* Chart Containers */
.chart-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  border: 1px solid var(--border-subtle);
  min-height: 280px;
}

.chart-card .chart-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.chart-card .chart-title i {
  color: var(--chart-accent);
}

.chart-container {
  position: relative;
  height: 220px;
  width: 100%;
}

/* Search & Filter Bar */
.filter-bar {
  display: none;
  flex-wrap: wrap;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
  padding: var(--space-3);
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  align-items: center;
}

.filter-bar.visible {
  display: flex;
}

.search-input {
  flex: 1;
  min-width: 200px;
  padding: var(--space-2) var(--space-3);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
}

.search-input:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
}

.search-input::placeholder {
  color: var(--text-muted);
}

.filter-select {
  padding: var(--space-2) var(--space-3);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  cursor: pointer;
}

.filter-select:focus {
  outline: none;
  border-color: var(--border-focus);
}

.result-count {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

/* Animation Keyframes */
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Phosphor Icons Size Overrides */
i.ph {
  font-size: 1.25em;
  line-height: 1;
}
  </style>
</head>
<body>
  <div class="dashboard">
    
    <!-- HEADER -->
    <header class="app-header">
      <div class="header-left">
        <div class="app-logo">
          <div class="app-logo-icon">ğŸ“Š</div>
          <h1 class="app-title">OFX Reader</h1>
        </div>
      </div>
      <div class="header-right">
        <div class="header-status" id="headerStatus">
          <span>ğŸ“„</span>
          <span>Aguardando arquivo</span>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      
      <!-- TOP SECTION -->
      <div class="top-section">
        
        <!-- Left Column - Drop Zone -->
        <div class="drop-column">
          
          <!-- Upload Zone -->
          <div class="upload-section">
            <div class="upload-zone" id="uploadZone">
              <span class="upload-icon">ğŸ“</span>
              <h2 class="upload-title">Arraste seu arquivo OFX</h2>
              <p class="upload-subtitle">ou clique para selecionar</p>
              <p class="upload-hint">Arquivos .ofx de bancos brasileiros</p>
              <input type="file" id="fileInput" class="file-input" accept=".ofx">
            </div>
          </div>

          <!-- Loading State -->
          <div class="loading-container" id="loadingContainer">
            <div class="spinner"></div>
            <span class="loading-text">Processando arquivo...</span>
          </div>

          <!-- Error Message -->
          <div class="error-message" id="errorMessage">
            <span class="error-icon">âš ï¸</span>
            <span class="error-text" id="errorText"></span>
          </div>
        </div>

        <!-- Right Column - Info Cards -->
        <div class="info-column">
          <div class="info-section" id="infoSection">
            <div class="section-header">
              <h2 class="section-title">
                <span>ğŸ </span>
                InformaÃ§Ãµes da Conta
              </h2>
            </div>
            <div class="info-grid" id="infoGrid">
              <!-- Cards will be inserted here by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- ANALYTICS DASHBOARD -->
      <div class="analytics-section" id="analyticsSection">
        
        <!-- Stats Row -->
        <div class="stats-row" id="statsRow">
          <div class="stat-card">
            <span class="stat-icon"><i class="ph ph-arrow-down-left"></i></span>
            <div class="stat-label">Total CrÃ©ditos</div>
            <div class="stat-value credit" id="statCredits">R$ 0,00</div>
          </div>
          <div class="stat-card">
            <span class="stat-icon"><i class="ph ph-arrow-up-right"></i></span>
            <div class="stat-label">Total DÃ©bitos</div>
            <div class="stat-value debit" id="statDebits">R$ 0,00</div>
          </div>
          <div class="stat-card">
            <span class="stat-icon"><i class="ph ph-wallet"></i></span>
            <div class="stat-label">Saldo LÃ­quido</div>
            <div class="stat-value neutral" id="statNet">R$ 0,00</div>
          </div>
          <div class="stat-card">
            <span class="stat-icon"><i class="ph ph-arrows-left-right"></i></span>
            <div class="stat-label">MÃ©dia TransaÃ§Ã£o</div>
            <div class="stat-value neutral" id="statAverage">R$ 0,00</div>
          </div>
        </div>

        <!-- Charts Grid -->
        <div class="analytics-grid">
          <div class="chart-card">
            <h3 class="chart-title"><i class="ph ph-chart-bar"></i> Fluxo de Caixa Mensal</h3>
            <div class="chart-container">
              <canvas id="cashFlowChart"></canvas>
            </div>
          </div>
          <div class="chart-card">
            <h3 class="chart-title"><i class="ph ph-chart-pie-slice"></i> Categorias</h3>
            <div class="chart-container">
              <canvas id="categoryChart"></canvas>
            </div>
          </div>
          <div class="chart-card">
            <h3 class="chart-title"><i class="ph ph-chart-line-up"></i> EvoluÃ§Ã£o do Saldo</h3>
            <div class="chart-container">
              <canvas id="balanceChart"></canvas>
            </div>
          </div>
          <div class="chart-card">
            <h3 class="chart-title"><i class="ph ph-trend-up"></i> Resumo DiÃ¡rio</h3>
            <div class="chart-container">
              <canvas id="dailySummaryChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- FILTER BAR -->
      <div class="filter-bar" id="filterBar">
        <input type="text" class="search-input" id="searchInput" placeholder="Buscar transaÃ§Ã£o...">
        <select class="filter-select" id="sortSelect">
          <option value="date-desc">Data (mais recente)</option>
          <option value="date-asc">Data (mais antiga)</option>
          <option value="amount-desc">Valor (maior)</option>
          <option value="amount-asc">Valor (menor)</option>
        </select>
        <span class="result-count" id="resultCount">0 resultados</span>
      </div>

      <!-- BOTTOM SECTION - Transaction List -->
      <div class="bottom-section" id="bottomSection">
        <div class="list-header">
          <h2 class="list-title">
            <span>ğŸ“‹</span>
            TransaÃ§Ãµes
          </h2>
          <span class="list-count" id="transactionCount">
            <span>0</span> transaÃ§Ãµes
          </span>
        </div>
        <div class="list-container" id="listContainer">
          <ul class="transaction-list" id="transactionList">
            <!-- Items will be inserted here by JavaScript -->
          </ul>
        </div>
      </div>

    </main>

  </div>

  <script>
'use strict';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 1: CONFIGURATION & CONSTANTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const CONFIG = {
  fileAccept: '.ofx',
  dateFormat: 'DD-MM-YYYY',
  currency: 'BRL',
  locale: 'pt-BR',
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 2: STATE MANAGEMENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const AppState = {
  status: 'initial',  // 'initial' | 'loading' | 'success' | 'error'
  ofxData: null,      // Parsed OFX data (metadata + transactions)
  error: null,        // Error message string
  fileName: null,     // Currently loaded file name
};

/**
 * Update state and re-render. This is the ONLY way to change the UI.
 */
function updateState(newState) {
  Object.assign(AppState, newState);
  render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 3: UTILITY FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Safely get a nested property. Never throws.
 */
function safeGet(obj, path, defaultValue = null) {
  if (obj == null) return defaultValue;
  const keys = path.split('.');
  let current = obj;
  for (const key of keys) {
    if (current == null || typeof current !== 'object') return defaultValue;
    current = current[key];
  }
  return current ?? defaultValue;
}

/**
 * Parse a number safely. Never returns NaN.
 */
function safeNumber(value, defaultValue = 0) {
  if (value == null) return defaultValue;
  if (typeof value === 'number') return isNaN(value) ? defaultValue : value;
  const parsed = parseFloat(String(value).replace(/[^\d.-]/g, ''));
  return isNaN(parsed) ? defaultValue : parsed;
}

/**
 * Safe string â€” never null/undefined, always trimmed.
 */
function safeString(value, defaultValue = '') {
  if (value == null) return defaultValue;
  return String(value).trim() || defaultValue;
}

/**
 * Escape HTML to prevent XSS. Use when inserting user data into DOM.
 */
function escapeHtml(str) {
  if (str == null) return '';
  const div = document.createElement('div');
  div.textContent = String(str);
  return div.innerHTML;
}

/**
 * Wrap event handlers to prevent crashes.
 */
function safeHandler(fn) {
  return function(event) {
    try {
      fn.call(this, event);
    } catch (error) {
      console.error('[Event Handler Error]', error);
      updateState({ 
        status: 'error', 
        error: 'Something went wrong. Please try again.',
      });
    }
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 4: CORE LOGIC (OFX PARSING)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Fix Portuguese encoding issues (Windows-1252 corruption in "ASCII" files)
 * PCD Section 5.2
 * 
 * Handles multiple corruption patterns:
 * 1. UTF-8 double-encoding (ÃƒÂ§ â†’ Ã§, ÃƒÂ£ â†’ Ã£, etc.)
 * 2. Replacement characters (ï¿½ â†’ proper character based on context)
 * 3. ISO-8859-1/Windows-1252 bytes read as UTF-8
 */
function fixPortugueseEncoding(text) {
  if (!text) return '';
  
  // Pattern 1: UTF-8 double-encoding (most common in OFX files)
  const doubleEncodingMap = {
    // Lowercase
    'ÃƒÂ§': 'Ã§', 'ÃƒÂ£': 'Ã£', 'ÃƒÂ¡': 'Ã¡', 'ÃƒÂ©': 'Ã©', 'ÃƒÂ­': 'Ã­', 
    'ÃƒÂ³': 'Ã³', 'ÃƒÂº': 'Ãº', 'Ãƒ ': 'Ã ', 'ÃƒÂ¢': 'Ã¢', 'ÃƒÂª': 'Ãª', 
    'ÃƒÂ´': 'Ã´', 'ÃƒÂµ': 'Ãµ', 'ÃƒÂ¨': 'Ã¨', 'ÃƒÂ¬': 'Ã¬', 'ÃƒÂ²': 'Ã²',
    'ÃƒÂ¹': 'Ã¹', 'ÃƒÂ¼': 'Ã¼', 'ÃƒÂ±': 'Ã±',
    // Common combinations
    'ÃƒÂ£o': 'Ã£o', 'ÃƒÂ§ÃƒÂ£o': 'Ã§Ã£o', 'ÃƒÂ§ÃƒÂµes': 'Ã§Ãµes',
    // Uppercase
    'Ãƒâ€¡': 'Ã‡', 'ÃƒÆ’': 'Ãƒ', 'Ãƒ': 'Ã', 'Ãƒâ€°': 'Ã‰', 'Ãƒ': 'Ã', 
    'Ãƒ"': 'Ã“', 'ÃƒÅ¡': 'Ãš', 'Ãƒâ‚¬': 'Ã€', 'Ãƒâ€š': 'Ã‚', 'ÃƒÅ ': 'ÃŠ', 
    'Ãƒ"': 'Ã”', 'Ãƒâ€¢': 'Ã•',
  };
  
  // Pattern 2: Context-aware replacement character fixes
  const replacementCharMap = {
    // Common patterns with replacement character (ï¿½)
    'Dï¿½B': 'DÃ‰B',           // DÃ©bito
    'CRï¿½D': 'CRÃ‰D',         // CrÃ©dito
    'SERVIï¿½OS': 'SERVIÃ‡OS', // ServiÃ§os
    'CONVï¿½NIO': 'CONVÃŠNIO', // ConvÃªnio
    'OPï¿½ï¿½O': 'OPÃ‡ÃƒO',       // OpÃ§Ã£o
    'TRANSAï¿½ï¿½O': 'TRANSAÃ‡ÃƒO', // TransaÃ§Ã£o
    'DEPï¿½SITO': 'DEPÃ“SITO', // DepÃ³sito
    'TRANSFERï¿½NCIA': 'TRANSFERÃŠNCIA', // TransferÃªncia
    'Saï¿½de': 'SaÃºde',       // SaÃºde
    'Foz do Iguaï¿½u': 'Foz do IguaÃ§u', // IguaÃ§u
    // Single character replacements context
    'ï¿½gua': 'Ã¡gua',
    'ï¿½nico': 'Ãºnico',
    'ï¿½ï¿½o': 'Ã§Ã£o',
    'ï¿½ï¿½es': 'Ã§Ãµes',
  };
  
  // Pattern 3: Single replacement character â†’ most likely character
  const singleCharFixes = {
    'Aï¿½': 'AÃ‡',
    'Oï¿½': 'OÃ‡',
    'Eï¿½': 'EÃ‡',
    'Iï¿½': 'IÃ‡',
    'Uï¿½': 'UÃ‡',
    'Ã‡ï¿½': 'Ã‡Ãƒ',
    'ï¿½A': 'Ã‡A',
    'ï¿½O': 'Ã‡O',
    'ï¿½E': 'Ã‡E',
    'ï¿½I': 'Ã‡I',
    'ï¿½U': 'Ã‡U',
  };
  
  let result = text;
  
  // Apply double-encoding fixes first
  for (const [corrupt, correct] of Object.entries(doubleEncodingMap)) {
    result = result.replaceAll(corrupt, correct);
  }
  
  // Apply context-aware replacement character fixes
  for (const [corrupt, correct] of Object.entries(replacementCharMap)) {
    result = result.replaceAll(corrupt, correct);
  }
  
  // Apply single character fixes
  for (const [corrupt, correct] of Object.entries(singleCharFixes)) {
    result = result.replaceAll(corrupt, correct);
  }
  
  // Final pass: if still has ï¿½ (replacement char), try common Portuguese substitutions
  if (result.includes('ï¿½')) {
    result = result
      .replace(/ï¿½([aeiou])/gi, (match, vowel) => {
        // ï¿½ before vowel is likely Ã§
        return 'Ã§' + vowel;
      })
      .replace(/([AEIOU])ï¿½/g, (match, vowel) => {
        // Vowel + ï¿½ is likely vowel with tilde or cedilla
        const mapping = { 'A': 'Ãƒ', 'E': 'Ã‰', 'I': 'Ã', 'O': 'Ã“', 'U': 'Ãš' };
        return mapping[vowel] || match;
      });
  }
  
  return result;
}

/**
 * Extract single tag value from OFX content
 * Used by parseOFXFile
 */
function extractTag(content, tagName) {
  if (!content || !tagName) return null;
  
  // Pattern: <TAG>value or <TAG>value</TAG>
  const regex = new RegExp(`<${tagName}>([^<]*(?:</[^>]+>)?)`, 'i');
  const match = content.match(regex);
  
  if (!match) return null;
  
  let value = match[1].trim();
  // Remove closing tag if present
  value = value.replace(/<\/[^>]+>$/, '').trim();
  
  return value || null;
}

/**
 * Extract all blocks between start and end tags
 * Used by parseOFXFile for transactions
 */
function extractAllBetween(content, startTag, endTag) {
  if (!content || !startTag || !endTag) return [];
  
  const blocks = [];
  const regex = new RegExp(`${startTag}([\\s\\S]*?)${endTag}`, 'gi');
  let match;
  
  while ((match = regex.exec(content)) !== null) {
    blocks.push(match[1]);
  }
  
  return blocks;
}

/**
 * Convert OFX date formats to DD-MM-YYYY
 * PCD Section 5.3
 */
function parseOFXDate(dateStr) {
  if (!dateStr) return null;
  
  // Remove timezone: YYYYMMDDHHMMSS[-03:EST] â†’ YYYYMMDD
  const cleanDate = dateStr.split('[')[0].substring(0, 8);
  
  if (cleanDate.length !== 8) return null;
  
  const year = cleanDate.substring(0, 4);
  const month = cleanDate.substring(4, 6);
  const day = cleanDate.substring(6, 8);
  
  // Validate
  const y = parseInt(year, 10);
  const m = parseInt(month, 10);
  const d = parseInt(day, 10);
  
  if (isNaN(y) || isNaN(m) || isNaN(d)) return null;
  if (m < 1 || m > 12) return null;
  if (d < 1 || d > 31) return null;
  
  return `${day}-${month}-${year}`;
}

/**
 * Extract transaction from STMTTRN block
 * PCD Section 5.4
 */
function parseTransaction(block) {
  if (!block) return null;
  
  const typeRaw = extractTag(block, 'TRNTYPE');
  const dateRaw = extractTag(block, 'DTPOSTED');
  const amountRaw = extractTag(block, 'TRNAMT');
  const memo = extractTag(block, 'MEMO') || extractTag(block, 'NAME') || 'No description';
  
  // Validate required fields
  if (!dateRaw || !amountRaw) {
    console.warn('[parseTransaction] Skipping: missing date or amount');
    return null;
  }
  
  const date = parseOFXDate(dateRaw);
  if (!date) {
    console.warn('[parseTransaction] Skipping: invalid date', dateRaw);
    return null;
  }
  
  const amount = parseFloat(amountRaw);
  if (isNaN(amount)) {
    console.warn('[parseTransaction] Skipping: invalid amount', amountRaw);
    return null;
  }
  
  // Map transaction type
  let type = 'OTHER';
  if (typeRaw) {
    const typeUpper = typeRaw.toUpperCase();
    if (['CREDIT', 'DEBIT', 'PAYMENT', 'OTHER'].includes(typeUpper)) {
      type = typeUpper;
    }
  }
  
  return {
    type,
    date,
    amount,
    description: memo.trim(),
  };
}

/**
 * Format amounts as Brazilian Real (R$ X.XXX,XX)
 * PCD Section 5.5
 */
function formatCurrency(value) {
  if (value == null || isNaN(value)) {
    return 'R$ 0,00';
  }
  
  const absValue = Math.abs(value);
  
  // Format to 2 decimal places
  let formatted = absValue.toFixed(2); // "1234.56"
  
  // Replace decimal point with comma
  const parts = formatted.split('.');
  const integerPart = parts[0];
  const decimalPart = parts[1];
  
  // Add thousand separators
  let withSeparators = '';
  for (let i = integerPart.length - 1, count = 0; i >= 0; i--, count++) {
    if (count > 0 && count % 3 === 0) {
      withSeparators = '.' + withSeparators;
    }
    withSeparators = integerPart[i] + withSeparators;
  }
  
  return `R$ ${withSeparators},${decimalPart}`;
}

/**
 * Main OFX parser - extract all data from file
 * PCD Section 5.1
 */
function parseOFXFile(fileContent) {
  if (!fileContent || typeof fileContent !== 'string') {
    throw new Error('Empty file content');
  }
  
  // Fix encoding issues first
  const content = fixPortugueseEncoding(fileContent);
  
  // Validate OFX header
  if (!content.includes('OFXHEADER') && !content.includes('<OFX>')) {
    throw new Error('Invalid OFX file');
  }
  
  // Initialize result
  const result = {
    metadata: {},
    transactions: [],
  };
  
  // Extract metadata
  result.metadata.bankName = extractTag(content, 'ORG') || 'Unknown Bank';
  result.metadata.bankId = extractTag(content, 'BANKID') || extractTag(content, 'FID');
  result.metadata.accountId = extractTag(content, 'ACCTID');
  result.metadata.branchId = extractTag(content, 'BRANCHID');
  result.metadata.accountType = extractTag(content, 'ACCTTYPE');
  result.metadata.currency = extractTag(content, 'CURDEF') || 'BRL';
  
  // Extract dates
  const startDateRaw = extractTag(content, 'DTSTART');
  if (startDateRaw) {
    result.metadata.startDate = parseOFXDate(startDateRaw);
  }
  
  const endDateRaw = extractTag(content, 'DTEND');
  if (endDateRaw) {
    result.metadata.endDate = parseOFXDate(endDateRaw);
  }
  
  // Extract balance
  const balanceRaw = extractTag(content, 'BALAMT');
  if (balanceRaw) {
    result.metadata.balance = parseFloat(balanceRaw);
  }
  
  const balanceDateRaw = extractTag(content, 'DTASOF');
  if (balanceDateRaw) {
    result.metadata.balanceDate = parseOFXDate(balanceDateRaw);
  }
  
  // Extract transactions
  const transactionBlocks = extractAllBetween(content, '<STMTTRN>', '</STMTTRN>');
  
  for (const block of transactionBlocks) {
    const transaction = parseTransaction(block);
    if (transaction) {
      result.transactions.push(transaction);
    }
  }
  
  if (result.transactions.length === 0) {
    throw new Error('No valid transactions found');
  }
  
  return result;
}

/**
 * Process uploaded file
 * PCD Section 5.6
 */
function handleFileUpload(file) {
  if (!file) {
    updateState({ status: 'error', error: 'No file selected' });
    return;
  }
  
  if (!file.name.toLowerCase().endsWith('.ofx')) {
    updateState({ status: 'error', error: 'Please select an OFX file' });
    return;
  }
  
  updateState({ status: 'loading', fileName: file.name });
  
  const reader = new FileReader();
  
  reader.onload = function(e) {
    try {
      let content = e.target.result;
      
      // Detect encoding issues: if we have many ï¿½ (replacement characters) and file declares CHARSET:1252
      const hasReplacementChars = content.includes('ï¿½');
      const declaresWindows1252 = /CHARSET:\s*1252/i.test(content);
      
      if (hasReplacementChars && declaresWindows1252) {
        // Try to recover by reading as ISO-8859-1 / Windows-1252
        // FileReader doesn't support Windows-1252 directly, so we'll use binary read
        const binaryReader = new FileReader();
        binaryReader.onload = function(binaryEvent) {
          try {
            // Read as array buffer, then decode as Latin1
            const bytes = new Uint8Array(binaryEvent.target.result);
            let latin1Content = '';
            for (let i = 0; i < bytes.length; i++) {
              latin1Content += String.fromCharCode(bytes[i]);
            }
            
            // Now apply encoding fixes
            const ofxData = parseOFXFile(latin1Content);
            updateState({ 
              status: 'success', 
              ofxData,
              error: null,
            });
          } catch (error) {
            console.error('[handleFileUpload] Binary read parse error:', error);
            // Fall back to UTF-8 parsing with enhanced fixes
            try {
              const ofxData = parseOFXFile(content);
              updateState({ 
                status: 'success', 
                ofxData,
                error: null,
              });
            } catch (fallbackError) {
              updateState({ 
                status: 'error', 
                error: fallbackError.message || 'Unable to read file. The OFX file may be corrupted.',
              });
            }
          }
        };
        binaryReader.onerror = function() {
          updateState({ 
            status: 'error', 
            error: 'Failed to read file. Please try again.',
          });
        };
        binaryReader.readAsArrayBuffer(file);
      } else {
        // Standard UTF-8 parsing
        const ofxData = parseOFXFile(content);
        updateState({ 
          status: 'success', 
          ofxData,
          error: null,
        });
      }
    } catch (error) {
      console.error('[handleFileUpload] Parse error:', error);
      updateState({ 
        status: 'error', 
        error: error.message || 'Unable to read file. The OFX file may be corrupted.',
      });
    }
  };
  
  reader.onerror = function() {
    updateState({ 
      status: 'error', 
      error: 'Failed to read file. Please try again.',
    });
  };
  
  reader.readAsText(file, 'UTF-8');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 5: UI RENDERING FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Master render function - dispatches to state-specific renderers
 */
function render() {
  // Get containers
  const loadingContainer = document.getElementById('loadingContainer');
  const errorMessage = document.getElementById('errorMessage');
  const infoSection = document.getElementById('infoSection');
  const analyticsSection = document.getElementById('analyticsSection');
  const filterBar = document.getElementById('filterBar');
  const bottomSection = document.getElementById('bottomSection');
  const headerStatus = document.getElementById('headerStatus');
  const uploadZone = document.getElementById('uploadZone');
  
  if (!loadingContainer || !errorMessage) {
    console.error('[render] Required DOM elements not found');
    return;
  }
  
  // Reset visibility
  loadingContainer.classList.remove('visible');
  errorMessage.classList.remove('visible');
  
  // Hide data sections by default
  if (infoSection) infoSection.style.display = 'none';
  if (analyticsSection) analyticsSection.classList.remove('visible');
  if (filterBar) filterBar.classList.remove('visible');
  if (bottomSection) bottomSection.style.display = 'none';
  
  // Reset upload zone if not in success state
  if (uploadZone && AppState.status !== 'success') {
    uploadZone.classList.remove('has-file');
  }
  
  switch (AppState.status) {
    case 'initial':
      if (headerStatus) {
        headerStatus.className = 'header-status';
        headerStatus.innerHTML = '<span class="status-icon">ğŸ“„</span><span>Aguardando arquivo</span>';
      }
      break;
      
    case 'loading':
      loadingContainer.classList.add('visible');
      if (headerStatus) {
        headerStatus.className = 'header-status processing';
        headerStatus.innerHTML = '<span class="status-icon">â³</span><span>Processando...</span>';
      }
      break;
      
    case 'success':
      if (infoSection) infoSection.style.display = 'flex';
      if (analyticsSection) analyticsSection.classList.add('visible');
      if (filterBar) filterBar.classList.add('visible');
      if (bottomSection) bottomSection.style.display = 'flex';
      if (headerStatus) {
        headerStatus.className = 'header-status success';
        headerStatus.innerHTML = '<span class="status-icon">âœ…</span><span>Arquivo carregado</span>';
      }
      renderInfoCards();
      renderAnalytics();
      renderTransactions();
      break;
      
    case 'error':
      errorMessage.classList.add('visible');
      const errorText = document.getElementById('errorText');
      if (errorText) {
        errorText.textContent = AppState.error || 'An error occurred';
      }
      if (headerStatus) {
        headerStatus.className = 'header-status error';
        headerStatus.innerHTML = '<span class="status-icon">âŒ</span><span>Erro</span>';
      }
      break;
      
    default:
      errorMessage.classList.add('visible');
      const errorTextDefault = document.getElementById('errorText');
      if (errorTextDefault) {
        errorTextDefault.textContent = 'Unknown application state';
      }
  }
}

/**
 * Render info cards (right column)
 */
function renderInfoCards() {
  const container = document.getElementById('infoGrid');
  const uploadZone = document.getElementById('uploadZone');
  
  if (!container || !AppState.ofxData) return;
  
  // Update upload zone to show file loaded state
  if (uploadZone) {
    uploadZone.classList.add('has-file');
    uploadZone.innerHTML = `
      <span class="upload-icon">âœ…</span>
      <h2 class="upload-title">${escapeHtml(AppState.fileName || 'Arquivo carregado')}</h2>
      <p class="upload-subtitle">Clique para carregar outro arquivo</p>
      <input type="file" id="fileInput" class="file-input" accept=".ofx">
    `;
    // Re-attach event listeners
    setupUploadZoneEvents();
  }
  
  container.innerHTML = '';
  const metadata = AppState.ofxData.metadata;
  
  // Define cards with icons
  const cards = [
    { icon: 'ğŸ¦', label: 'Banco', value: metadata.bankName || 'N/A', subvalue: metadata.bankId ? `ID: ${metadata.bankId}` : null },
    { icon: 'ğŸ’³', label: 'Conta', value: metadata.accountId || 'N/A', subvalue: metadata.accountType || null },
    { icon: 'ğŸ”–', label: 'AgÃªncia', value: metadata.branchId || 'N/A', subvalue: null },
    { icon: 'ğŸ“…', label: 'PerÃ­odo', value: metadata.startDate && metadata.endDate ? `${metadata.startDate} - ${metadata.endDate}` : 'N/A', subvalue: null },
    { icon: 'ğŸ’°', label: 'Saldo', value: metadata.balance != null ? formatCurrency(metadata.balance) : 'N/A', subvalue: metadata.balanceDate || null, highlight: metadata.balance != null, isBalance: true },
    { icon: 'ğŸ’µ', label: 'Moeda', value: metadata.currency || 'BRL', subvalue: null },
  ];
  
  // Create cards with staggered animation delays
  cards.forEach((card, index) => {
    const cardEl = document.createElement('div');
    let cardClass = 'info-card';
    if (card.highlight) cardClass += ' highlight';
    cardEl.className = cardClass;
    cardEl.style.animationDelay = `${0.1 + index * 0.1}s`;
    
    const icon = document.createElement('div');
    icon.className = 'card-icon';
    icon.textContent = card.icon;
    cardEl.appendChild(icon);
    
    const label = document.createElement('div');
    label.className = 'card-label';
    label.textContent = card.label;
    cardEl.appendChild(label);
    
    const value = document.createElement('div');
    let valueClass = 'card-value';
    if (card.highlight) valueClass += ' highlight';
    if (card.isBalance && metadata.balance != null) {
      valueClass += metadata.balance >= 0 ? ' balance-positive' : ' balance-negative';
    }
    value.className = valueClass;
    value.textContent = card.value;
    cardEl.appendChild(value);
    
    if (card.subvalue) {
      const subvalue = document.createElement('div');
      subvalue.className = 'card-subvalue';
      subvalue.textContent = card.subvalue;
      cardEl.appendChild(subvalue);
    }
    
    container.appendChild(cardEl);
  });
}

// Chart instances storage
let chartInstances = {};

/**
 * Render analytics dashboard with Chart.js
 */
function renderAnalytics() {
  if (!AppState.ofxData || !AppState.ofxData.transactions) return;
  
  const transactions = AppState.ofxData.transactions;
  
  // Calculate statistics
  const stats = calculateTransactionStats(transactions);
  renderStatsCards(stats);
  
  // Render charts
  renderCashFlowChart(transactions);
  renderCategoryChart(transactions);
  renderBalanceChart(transactions);
  renderDailySummaryChart(transactions);
  
  // Animate charts with GSAP if available
  if (typeof gsap !== 'undefined') {
    gsap.from('.chart-card', {
      scrollTrigger: '.analytics-section',
      y: 30,
      opacity: 0,
      stagger: 0.1,
      duration: 0.5,
      ease: 'power2.out'
    });
    
    gsap.from('.stat-card', {
      y: 20,
      opacity: 0,
      stagger: 0.08,
      duration: 0.4,
      ease: 'back.out(1.5)'
    });
  }
}

/**
 * Calculate transaction statistics
 */
function calculateTransactionStats(transactions) {
  let totalCredits = 0;
  let totalDebits = 0;
  
  transactions.forEach(t => {
    if (t.amount > 0) {
      totalCredits += t.amount;
    } else {
      totalDebits += Math.abs(t.amount);
    }
  });
  
  const netBalance = totalCredits - totalDebits;
  const avgTransaction = transactions.length > 0
    ? (totalCredits + totalDebits) / transactions.length
    : 0;
  
  return {
    totalCredits,
    totalDebits,
    netBalance,
    avgTransaction
  };
}

/**
 * Render statistics cards
 */
function renderStatsCards(stats) {
  const creditsEl = document.getElementById('statCredits');
  const debitsEl = document.getElementById('statDebits');
  const netEl = document.getElementById('statNet');
  const avgEl = document.getElementById('statAverage');
  
  if (creditsEl) creditsEl.textContent = formatCurrency(stats.totalCredits);
  if (debitsEl) debitsEl.textContent = formatCurrency(stats.totalDebits);
  if (netEl) {
    netEl.textContent = formatCurrency(stats.netBalance);
    netEl.className = 'stat-value ' + (stats.netBalance >= 0 ? 'credit' : 'debit');
  }
  if (avgEl) avgEl.textContent = formatCurrency(stats.avgTransaction);
}

/**
 * Get month label from date string
 */
function getMonthLabel(dateStr) {
  const date = new Date(dateStr);
  const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
  return months[date.getMonth()];
}

/**
 * Render cash flow bar chart
 */
function renderCashFlowChart(transactions) {
  const ctx = document.getElementById('cashFlowChart');
  if (!ctx) return;
  
  // Destroy existing chart
  if (chartInstances.cashFlow) {
    chartInstances.cashFlow.destroy();
  }
  
  // Group by month
  const monthlyData = {};
  transactions.forEach(t => {
    const month = getMonthLabel(t.dateRaw);
    if (!monthlyData[month]) {
      monthlyData[month] = { credit: 0, debit: 0 };
    }
    if (t.amount > 0) {
      monthlyData[month].credit += t.amount;
    } else {
      monthlyData[month].debit += Math.abs(t.amount);
    }
  });
  
  const labels = Object.keys(monthlyData);
  const creditData = labels.map(l => monthlyData[l].credit);
  const debitData = labels.map(l => monthlyData[l].debit);
  
  chartInstances.cashFlow = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'CrÃ©ditos',
          data: creditData,
          backgroundColor: 'rgba(76, 175, 80, 0.8)',
          borderColor: '#4caf50',
          borderWidth: 1,
          borderRadius: 4
        },
        {
          label: 'DÃ©bitos',
          data: debitData,
          backgroundColor: 'rgba(244, 67, 54, 0.8)',
          borderColor: '#f44336',
          borderWidth: 1,
          borderRadius: 4
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'top',
          labels: { color: '#90caf9', font: { size: 11 } }
        }
      },
      scales: {
        x: {
          ticks: { color: '#90caf9' },
          grid: { color: 'rgba(144, 202, 249, 0.1)' }
        },
        y: {
          ticks: {
            color: '#90caf9',
            callback: function(value) {
              return 'R$ ' + value.toLocaleString('pt-BR');
            }
          },
          grid: { color: 'rgba(144, 202, 249, 0.1)' }
        }
      }
    }
  });
}

/**
 * Render category doughnut chart
 */
function renderCategoryChart(transactions) {
  const ctx = document.getElementById('categoryChart');
  if (!ctx) return;
  
  if (chartInstances.category) {
    chartInstances.category.destroy();
  }
  
  // Categorize transactions based on memo keywords
  const categories = {
    'TransferÃªncia': 0,
    'Pagamento': 0,
    'Compra': 0,
    'Tarifa': 0,
    'Outros': 0
  };
  
  const keywords = {
    'TransferÃªncia': ['transfer', 'tranfer', 'pix', 'ted', 'doc', 'envio', 'receb'],
    'Pagamento': ['pagamento', 'boleto', 'conta luz', 'conta Ã¡gua', 'internet', 'telefone'],
    'Compra': ['compra', 'loja', 'mercado', 'supermercado', 'farmÃ¡cia', 'uber', 'ifood'],
    'Tarifa': ['tarifa', 'taxa', 'juros', 'mutuo', 'iof']
  };
  
  transactions.forEach(t => {
    const memo = (t.memo || '').toLowerCase();
    let categorized = false;
    
    for (const [cat, words] of Object.entries(keywords)) {
      if (words.some(w => memo.includes(w))) {
        categories[cat] += Math.abs(t.amount);
        categorized = true;
        break;
      }
    }
    
    if (!categorized) {
      categories['Outros'] += Math.abs(t.amount);
    }
  });
  
  const colors = [
    'rgba(25, 118, 210, 0.8)',
    'rgba(168, 85, 247, 0.8)',
    'rgba(251, 191, 36, 0.8)',
    'rgba(244, 67, 54, 0.8)',
    'rgba(100, 181, 246, 0.8)'
  ];
  
  chartInstances.category = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: Object.keys(categories),
      datasets: [{
        data: Object.values(categories),
        backgroundColor: colors,
        borderColor: '#081625',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'right',
          labels: { color: '#90caf9', font: { size: 10 }, boxWidth: 12 }
        }
      }
    }
  });
}

/**
 * Render balance evolution line chart
 */
function renderBalanceChart(transactions) {
  const ctx = document.getElementById('balanceChart');
  if (!ctx) return;
  
  if (chartInstances.balance) {
    chartInstances.balance.destroy();
  }
  
  // Sort by date
  const sorted = [...transactions].sort((a, b) =>
    new Date(a.dateRaw) - new Date(b.dateRaw)
  );
  
  // Calculate running balance
  let balance = 0;
  const balanceData = sorted.map(t => {
    balance += t.amount;
    return { date: t.date, balance: balance };
  });
  
  // Take last 30 data points if too many
  const displayData = balanceData.length > 30
    ? balanceData.slice(-30)
    : balanceData;
  
  chartInstances.balance = new Chart(ctx, {
    type: 'line',
    data: {
      labels: displayData.map(d => d.date),
      datasets: [{
        label: 'Saldo Acumulado',
        data: displayData.map(d => d.balance),
        borderColor: '#00e5ff',
        backgroundColor: 'rgba(0, 229, 255, 0.1)',
        fill: true,
        tension: 0.4,
        pointRadius: 3,
        pointBackgroundColor: '#00e5ff'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false
        }
      },
      scales: {
        x: {
          ticks: {
            color: '#90caf9',
            maxRotation: 45,
            minRotation: 45,
            font: { size: 9 }
          },
          grid: { color: 'rgba(144, 202, 249, 0.1)' }
        },
        y: {
          ticks: {
            color: '#90caf9',
            callback: function(value) {
              return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 0 });
            }
          },
          grid: { color: 'rgba(144, 202, 249, 0.1)' }
        }
      }
    }
  });
}

/**
 * Render daily summary bar chart
 */
function renderDailySummaryChart(transactions) {
  const ctx = document.getElementById('dailySummaryChart');
  if (!ctx) return;
  
  if (chartInstances.dailySummary) {
    chartInstances.dailySummary.destroy();
  }
  
  // Group by day
  const dailyData = {};
  transactions.forEach(t => {
    const day = t.date;
    if (!dailyData[day]) {
      dailyData[day] = { credit: 0, debit: 0 };
    }
    if (t.amount > 0) {
      dailyData[day].credit += t.amount;
    } else {
      dailyData[day].debit += Math.abs(t.amount);
    }
  });
  
  const labels = Object.keys(dailyData).slice(-10); // Last 10 days
  const creditData = labels.map(l => dailyData[l].credit);
  const debitData = labels.map(l => dailyData[l].debit);
  
  chartInstances.dailySummary = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'CrÃ©ditos',
          data: creditData,
          backgroundColor: 'rgba(76, 175, 80, 0.7)',
          borderRadius: 3
        },
        {
          label: 'DÃ©bitos',
          data: debitData,
          backgroundColor: 'rgba(244, 67, 54, 0.7)',
          borderRadius: 3
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'top',
          labels: { color: '#90caf9', font: { size: 10 } }
        }
      },
      scales: {
        x: {
          ticks: { color: '#90caf9', font: { size: 9 } },
          grid: { display: false }
        },
        y: {
          ticks: {
            color: '#90caf9',
            callback: function(value) {
              return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 0 });
            }
          },
          grid: { color: 'rgba(144, 202, 249, 0.1)' }
        }
      }
    }
  });
}

/**
 * Render transaction list (scrollable)
 */
function renderTransactions() {
  const list = document.getElementById('transactionList');
  const countElement = document.getElementById('transactionCount');
  const bottomSection = document.getElementById('bottomSection');
  
  if (!list || !AppState.ofxData) return;
  
  if (bottomSection) {
    bottomSection.style.display = 'flex';
  }
  
  list.innerHTML = '';
  const transactions = AppState.ofxData.transactions;
  
  // Update count with animation
  if (countElement) {
    const count = transactions.length;
    countElement.innerHTML = `<span>${count}</span> transaÃ§Ã£o${count !== 1 ? 'Ãµes' : ''}`;
    // Trigger animation
    countElement.classList.remove('animate');
    void countElement.offsetWidth; // Force reflow
    countElement.classList.add('animate');
  }
  
  // Create list items with staggered animation
  transactions.forEach((transaction, index) => {
    const item = document.createElement('li');
    item.className = 'transaction-item';
    // Stagger animation - all items get animation with increasing delay
    item.style.animationDelay = `${index * 0.02}s`;
    item.classList.add('animate-in');
    
    const dateEl = document.createElement('span');
    dateEl.className = 'transaction-date';
    dateEl.textContent = transaction.date;
    item.appendChild(dateEl);
    
    const amountEl = document.createElement('span');
    const amountClass = transaction.amount >= 0 ? 'credit' : 'debit';
    amountEl.className = `transaction-amount ${amountClass}`;
    amountEl.textContent = formatCurrency(transaction.amount);
    item.appendChild(amountEl);
    
    const descEl = document.createElement('span');
    descEl.className = 'transaction-description';
    descEl.textContent = transaction.description;
    descEl.title = transaction.description;
    item.appendChild(descEl);
    
    list.appendChild(item);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 6: EVENT HANDLERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Set up upload zone event listeners
 */
function setupUploadZoneEvents() {
  const uploadZone = document.getElementById('uploadZone');
  const fileInput = document.getElementById('fileInput');
  
  if (!uploadZone || !fileInput) return;
  
  uploadZone.onclick = function() {
    fileInput.click();
  };
  
  fileInput.onchange = function(e) {
    const file = e.target.files[0];
    if (file) {
      handleFileUpload(file);
    }
    e.target.value = '';
  };
  
  uploadZone.ondragover = function(e) {
    e.preventDefault();
    uploadZone.classList.add('dragover');
  };
  
  uploadZone.ondragleave = function(e) {
    e.preventDefault();
    uploadZone.classList.remove('dragover');
  };
  
  uploadZone.ondrop = function(e) {
    e.preventDefault();
    uploadZone.classList.remove('dragover');
    
    const file = e.dataTransfer.files[0];
    if (file) {
      handleFileUpload(file);
    }
  };
}

/**
 * Set up all event listeners
 */
function setupEventListeners() {
  setupUploadZoneEvents();
  
  // Search functionality
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('input', function(e) {
      filterTransactions(e.target.value, document.getElementById('sortSelect')?.value || 'date-desc');
    });
  }
  
  // Sort functionality
  const sortSelect = document.getElementById('sortSelect');
  if (sortSelect) {
    sortSelect.addEventListener('change', function(e) {
      const searchValue = document.getElementById('searchInput')?.value || '';
      filterTransactions(searchValue, e.target.value);
    });
  }
}

/**
 * Filter and sort transactions
 */
function filterTransactions(searchTerm, sortOrder) {
  if (!AppState.ofxData || !AppState.ofxData.transactions) return;
  
  const list = document.getElementById('transactionList');
  const resultCount = document.getElementById('resultCount');
  
  let transactions = [...AppState.ofxData.transactions];
  
  // Filter by search term
  if (searchTerm) {
    const term = searchTerm.toLowerCase();
    transactions = transactions.filter(t =>
      (t.memo && t.memo.toLowerCase().includes(term)) ||
      (t.date && t.date.includes(term)) ||
      (t.type && t.type.toLowerCase().includes(term))
    );
  }
  
  // Sort transactions
  transactions.sort((a, b) => {
    switch (sortOrder) {
      case 'date-asc':
        return new Date(a.dateRaw) - new Date(b.dateRaw);
      case 'date-desc':
        return new Date(b.dateRaw) - new Date(a.dateRaw);
      case 'amount-asc':
        return a.amount - b.amount;
      case 'amount-desc':
        return b.amount - a.amount;
      default:
        return 0;
    }
  });
  
  // Update result count
  if (resultCount) {
    const total = AppState.ofxData.transactions.length;
    resultCount.textContent = transactions.length === total
      ? `${total} transaÃ§Ãµes`
      : `${transactions.length} de ${total} transaÃ§Ãµes`;
  }
  
  // Re-render filtered transactions
  renderFilteredTransactions(transactions);
}

/**
 * Render filtered transactions
 */
function renderFilteredTransactions(transactions) {
  const list = document.getElementById('transactionList');
  if (!list) return;
  
  list.innerHTML = '';
  
  transactions.forEach((transaction, index) => {
    const item = document.createElement('li');
    item.className = 'transaction-item';
    item.style.animationDelay = `${index * 0.02}s`;
    item.classList.add('animate-in');
    
    const dateEl = document.createElement('span');
    dateEl.className = 'transaction-date';
    dateEl.textContent = transaction.date;
    item.appendChild(dateEl);
    
    const amountEl = document.createElement('span');
    const amountClass = transaction.amount >= 0 ? 'credit' : 'debit';
    amountEl.className = `transaction-amount ${amountClass}`;
    amountEl.textContent = formatCurrency(transaction.amount);
    item.appendChild(amountEl);
    
    const descEl = document.createElement('span');
    descEl.className = 'transaction-description';
    descEl.textContent = transaction.memo || 'Sem descriÃ§Ã£o';
    item.appendChild(descEl);
    
    list.appendChild(item);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 7: INITIALIZATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.addEventListener('DOMContentLoaded', function() {
  try {
    // Initialize in initial state
    updateState({ status: 'initial' });
    
    // Set up event listeners
    setupEventListeners();
    
    // GSAP Page Load Animation
    if (typeof gsap !== 'undefined') {
      const timeline = gsap.timeline();
      
      // Header slide down
      timeline.from('.app-header', {
        y: -80,
        opacity: 0,
        duration: 0.5,
        ease: 'power3.out'
      });
      
      // Upload zone scale in
      timeline.from('.upload-zone', {
        scale: 0.9,
        opacity: 0,
        duration: 0.4,
        ease: 'back.out(1.5)'
      }, '-=0.2');
      
      // Info section fade in
      timeline.from('.info-section', {
        y: 20,
        opacity: 0,
        duration: 0.3,
        ease: 'power2.out'
      }, '-=0.1');
    }
    
    console.log('[OFX Reader] Application initialized successfully');
  } catch (error) {
    console.error('[init] Failed to initialize:', error);
    document.body.innerHTML = '<div style="color: #f44336; padding: 2rem; text-align: center; font-family: sans-serif;"><h1>Failed to start application</h1><p>Please refresh the page. If the problem persists, check the browser console for details.</p></div>';
  }
});
  </script>
</body>
</html>
